---
title: 红米AX6000路由器刷机流程记录
tags:
  - 路由器
  - OpenWrt
  - 红米
categories: 工具
abbrlink: ba0d09df
date: 2025-09-10 20:16:58
---

> **Redmi AX6000 参数**
>
> |   参数   |                       数值                        |    参数    |         数值         |
>| :------: | :-----------------------------------------------: | :--------: | :------------------: |
> | 产品型号 |                       RB06                        |  天线数量  |          4           |
> |   分类   |                  千兆双频 AX6000                  | 信号放大器 |       独立八路       |
> | 电源规格 |                      12V@2A                       |  网络接口  |     千兆网口 ×4      |
> |  处理器  | [MT7986A](https://mao.fan/socpk.html) 四核 2.0GHz |   空间流   | 2.4GHz 4×4 5GHz× 4×4 |
> |   内存   |                       512MB                       |  无线速率  |  1148Mbps 4804Mbps   |
> |   闪存   |                       128MB                       |  最大频宽  |        160MHz        |
> | 无线协议 |                      Wi-Fi 6                      |            |                      |
>
> 注：Redmi AX6000 没有 2.5G 网口，考虑之后攒钱换一个接口更多的路由器……
>
> **电源适配器**：
>
> |       型号        |         输入          |  输出  |
>| :---------------: | :-------------------: | :----: |
> | AD-0241200200CN-1 | 100-240V~50/60Hz 0.7A | 12V@2A |

## 官方固件解锁 SSH

> 系统版本: [1.0.67 稳定版](https://cdn.cnbj1.fds.api.mi-img.com/xiaoqiang/rom/rb06/miwifi_rb06_firmware_de54d_1.0.67.bin)

将路由器重置后，后台默认地址是 `http://192.168.31.1`，进入到后台后，获取 URL 中的 `stok`（`session token` 的缩写），然后用浏览器打开下面链接（`{token}` 替换为路由器管理平台 URL 中的 `stok`）

```url
http://192.168.31.1/cgi-bin/luci/;stok={token}/api/misystem/set_sys_time?timezone=%20%27%20%3B%20zz%3D%24%28dd%20if%3D%2Fdev%2Fzero%20bs%3D1%20count%3D2%202%3E%2Fdev%2Fnull%29%20%3B%20printf%20%27%A5%5A%25c%25c%27%20%24zz%20%24zz%20%7C%20mtd%20write%20-%20crash%20%3B%20
```

> 相当于执行
>
> ```shell
> zz=$(dd if=/dev/zero bs=1 count=2 2>/dev/null) ; printf '\xA5\x5A%c%c' $zz $zz | mtd write - crash ;
> ```
>
> 即将 `\xA5\x5A\x00\x00` 写入 crash 分区。

浏览器返回 `{"code":0}` 即为成功。

然后通过浏览器重启路由器，在地址栏输入下面链接（`token` 替换为路由器管理平台 URL 中的 `stok`）

```url
http://192.168.31.1/cgi-bin/luci/;stok={token}/api/misystem/set_sys_time?timezone=%20%27%20%3b%20reboot%20%3b%20
```

> 相当于执行
>
> ```shell
> reboot
> ```

浏览器返回 `{"code":0}` 即为成功。

---

等待一段时间后，路由器重启完成，重新登陆路由器后台 `192.168.31.1`，获取新的 `stok`，并在浏览器地址栏输入

```url
http://192.168.31.1/cgi-bin/luci/;stok={token}/api/misystem/set_sys_time?timezone=%20%27%20%3B%20bdata%20set%20telnet_en%3D1%20%3B%20bdata%20set%20ssh_en%3D1%20%3B%20bdata%20set%20uart_en%3D1%20%3B%20bdata%20commit%20%3B%20
```

> 相当于执行
>
> ```shell
> bdata set telnet_en=1;  # 启动 telnet 服务
> bdata set ssh_en=1;     # 启动 SSH 服务
> bdata set uart_en=1;    # 启动 UART 服务
> bdata commit;           # 提交配置更改
> ```

重启路由器

```url
http://192.168.31.1/cgi-bin/luci/;stok={token}/api/misystem/set_sys_time?timezone=%20%27%20%3b%20reboot%20%3b%20
```

然后利用 `PowerShell` 工具，输入下面指令连接路由器

```powershell
telnet 192.168.31.1
```

返回下面字符画 `ARE U OK` 即为成功，默认用户为 `root` 用户

```she
BusyBox v1.25.1 (2023-01-30 10:31:26 UTC) built-in shell (ash)

 -----------------------------------------------------
       Welcome to XiaoQiang!
 -----------------------------------------------------
  $$$$$$\  $$$$$$$\  $$$$$$$$\      $$\      $$\        $$$$$$\  $$\   $$\
 $$  __$$\ $$  __$$\ $$  _____|     $$ |     $$ |      $$  __$$\ $$ | $$  |
 $$ /  $$ |$$ |  $$ |$$ |           $$ |     $$ |      $$ /  $$ |$$ |$$  /
 $$$$$$$$ |$$$$$$$  |$$$$$\         $$ |     $$ |      $$ |  $$ |$$$$$  /
 $$  __$$ |$$  __$$< $$  __|        $$ |     $$ |      $$ |  $$ |$$  $$<
 $$ |  $$ |$$ |  $$ |$$ |           $$ |     $$ |      $$ |  $$ |$$ |\$$\
 $$ |  $$ |$$ |  $$ |$$$$$$$$\       $$$$$$$$$  |       $$$$$$  |$$ | \$$\
 \__|  \__|\__|  \__|\________|      \_________/        \______/ \__|  \__|


root@XiaoQiang:~#
```

然后执行下面脚本，固化 SSH

```shell
echo -e 'password\npassword' | passwd root
nvram set ssh_en=1
nvram set telnet_en=1
nvram set uart_en=1
nvram set boot_wait=on
nvram commit
sed -i 's/channel=.*/channel="debug"/g' /etc/init.d/dropbear
/etc/init.d/dropbear restart
mkdir /data/auto_ssh
cd /data/auto_ssh
curl -O https://fastly.jsdelivr.net/gh/lemoeo/AX6S@main/auto_ssh.sh
chmod +x auto_ssh.sh
uci set firewall.auto_ssh=include
uci set firewall.auto_ssh.type='script'
uci set firewall.auto_ssh.path='/data/auto_ssh/auto_ssh.sh'
uci set firewall.auto_ssh.enabled='1'
uci commit firewall
uci set system.@system[0].timezone='CST-8'
uci set system.@system[0].webtimezone='CST-8'
uci set system.@system[0].timezoneindex='2.84'
uci commit
mtd erase crash
reboot
```

重启之后就可以用 [SSH 工具](https://mobaxterm.mobatek.net/download.html) 连接路由器了（默认端口 22）。

## 刷入固件

> [点击此处](https://cloud.189.cn/web/share?code=rAZZ32mQNVRv) 获取.bin 文件（访问码：8fmk）

首先将 UBoot 文件上传到 `/tmp` 目录下，执行

```shell
mtd erase FIP
mtd write /tmp/Redmi_AX6000_MT7986_UBoot.bin FIP
mtd verify /tmp/Redmi_AX6000_MT7986_UBoot.bin FIP

# 输出 Success 表示刷入 UBoot 固件成功, 然后断电重新 RESET
```

默认后台的 IP 地址为 `192.168.31.1`，手动配置电脑的 IP 为 `192.168.31.2`，然后利用浏览器进入后台，上传 Wrt 固件并安装，等待自动完成即可。

随后将电脑 IP 地址切换为自动分配，进入路由器后台进行个性化配置。

## 插件配置

### ShellClash

安装脚本

```shell
sh -c "$(curl -kfsSl https://cdn.jsdelivr.net/gh/juewuy/ShellClash@master/install.sh)" && source /etc/profile &> /dev/nul
```

配置和 Clash 配置方法类似，导入配置文件，设置开机自启即可……

### OpenClash

> 如果没有内核，需要手动安装，在路由器管理后台的概况界面可以查询 CPU 架构，选择对应的安装包下载，然后执行
>
> ```shell
> cd /etc/openclash/core/
> tar -zxvf clash-linux-armv8.tar.gz
> chmod +x clash
> ```
>
> [点击此处](https://github.com/vernesong/OpenClash/releases/tag/Clash) 获取 OpenClash 内核安装包

进入管理后台，[服务] → [OpenClash] → [配置文件订阅]（懂的都懂），添加订阅后启动 OpenClash。

## 软件安装

### Python

```shell
opkg update
opkg list | grep python
opkg install python3
opkg install python3-pip
```

## 脚本

### 校园网自动登陆

> [点击此处](https://github.com/Euler0525/scripts/blob/master/shell/bitsrun.sh) 获取自动登陆脚本 `bitsrun.sh`

```shell
# Python 3.10.5
python -m pip install --user pipx --root-user-action=ignore
python -m pipx ensurepath
source ~/.bashrc
python -m pip install --user bitsrun --root-user-action=ignore
# ~/scripts/bitsrun.sh
nohup ~/scripts/bitsrun.sh >> /tmp/bitsrun.log 2>&1 &

# run automatically once the system starts up
vim /etc/rc.local

################################################################################
# Put your custom commands here that should be executed once
# the system init finished. By default this file does nothing.

nohup /root/scripts/bitsrun.sh >> /tmp/bitsrun.log 2>&1 &

exit 0
################################################################################

chmod +x /etc/rc.local
```

上方写入 `rc.local` 的方法可能会失效，路由器重新开机后 Python 无法导入 bitsrun 库，开机自动运行配置修改为下面方法：

新建 `/etc/init.d/bitsrun` 文件并写入

```shell
#!/bin/sh /etc/rc.common

USE_PROCD=1
START=99
STOP=10

BITS_SCRIPT="/root/scripts/bitsrun.sh"
LOGFILE="/tmp/bitsrun.log"
PY_MODULE="bitsrun.cli"
MAX_WAIT=0


wait_for_python_import() {
    local elapsed=0
    local python_cmd=""
    export PYTHONPATH=/root/.local/lib/python3.10/site-packages:$PYTHONPATH

    if command -v python3 >/dev/null 2>&1; then
        python_cmd="python3"
    elif command -v python >/dev/null 2>&1; then
        python_cmd="python"
    else
        echo "[$(date '+%F %T')] bitsrun: python not found" >> "$LOGFILE"
        return 1
    fi

    echo "[$(date '+%F %T')] Python path: $(which $python_cmd)" >> "$LOGFILE"
    echo "[$(date '+%F %T')] bitsrun: waiting for python module import: ${PY_MODULE}" >> "$LOGFILE"

    while :; do
        if $python_cmd -c "from ${PY_MODULE} import cli" >/dev/null 2>&1; then
            echo "[$(date '+%F %T')] bitsrun: module ${PY_MODULE} is ready" >> "$LOGFILE"
            return 0
        fi

        echo "[$(date '+%F %T')] bitsrun: module not ready, waiting... (${elapsed}s)" >> "$LOGFILE"
        sleep 2

        elapsed=$((elapsed + 2))
        if [ "$MAX_WAIT" -gt 0 ] && [ "$elapsed" -ge "$MAX_WAIT" ]; then
            echo "[$(date '+%F %T')] bitsrun: timeout waiting for python import" >> "$LOGFILE"
            return 1
        fi
    done
}

start_service() {
    wait_for_python_import || return 1

    echo "[$(date '+%F %T')] bitsrun: starting ${BITS_SCRIPT}" >> "$LOGFILE"

    procd_open_instance
    procd_set_param command /bin/sh -c "
        export PATH=/root/.local/bin:\$PATH
        export PYTHONPATH=/root/.local/lib/python3.10/site-packages:\$PYTHONPATH
        ${BITS_SCRIPT} >> '${LOGFILE}' 2>&1
    "

    procd_set_param stdout 1
    procd_set_param stderr 1
    procd_set_param respawn
    procd_close_instance
}
```

然后配置开机运行

```shell
chmod +x /etc/init.d/bitsrun
/etc/init.d/bitsrun enable
/etc/init.d/bitsrun start
```

## 参考资料

[猫点饭 – 路由器参数大全、选购指南](https://mao.fan/Router/Redmi/AX6000)

[红米 AX6000 路由器刷机](https://page.xiabee.cn/posts/ax6000-openwrt/#/%E8%A7%A3%E9%94%81-SSH)

[lgs2007m](https://www.right.com.cn/forum/thread-8265832-1-1.html)

[237176253](https://www.right.com.cn/forum/thread-8261104-1-1.html)

[BITNP/bitsrun](https://github.com/BITNP/bitsrun)
